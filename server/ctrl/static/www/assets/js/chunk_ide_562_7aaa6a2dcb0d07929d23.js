(self.webpackChunkfilestash=self.webpackChunkfilestash||[]).push([[562],{51238:(e,t,n)=>{var o={"./clike":[39908,9,9762,3412,9160],"./clike.js":[39908,9,9762,3412,9160],"./clojure":[47810,9,2585,3235],"./clojure.js":[47810,9,2585,3235],"./cmake":[1532,9,8151],"./cmake.js":[1532,9,8151],"./commonlisp":[57670,9,1801],"./commonlisp.js":[57670,9,1801],"./css":[88214,9,6629,7261],"./css.js":[88214,9,6629,7261],"./diff":[76632,9,2459],"./diff.js":[76632,9,2459],"./dockerfile":[40311,9,2274],"./dockerfile.js":[40311,9,2274],"./elm":[85645,9,3403],"./elm.js":[85645,9,3403],"./emacs-org":[54647,9],"./emacs-org.js":[54647,9],"./erlang":[70866,9,2301],"./erlang.js":[70866,9,2301],"./go":[8333,9,4827],"./go.js":[8333,9,4827],"./htmlmixed":[77057,9,6629,6876,8786],"./htmlmixed.js":[77057,9,6629,6876,8786],"./javascript":[72801,9,6876,1660],"./javascript.js":[72801,9,6876,1660],"./jsx":[66553,9,6876,3245],"./jsx.js":[66553,9,6876,3245],"./keymap_base":[26761,7,3412,6169],"./keymap_base.js":[26761,7,3412,6169],"./keymap_vim":[4509,7,2585,2203],"./keymap_vim.js":[4509,7,2585,2203],"./lua":[27289,9,697],"./lua.js":[27289,9,697],"./orgmode":[13746,9,1583],"./orgmode.js":[13746,9,1583],"./perl":[76170,9,24,1180],"./perl.js":[76170,9,24,1180],"./php":[58058,9,6629,6876,9762,5887],"./php.js":[58058,9,6629,6876,9762,5887],"./properties":[24738,9,7143],"./properties.js":[24738,9,7143],"./python":[19469,9,8758],"./python.js":[19469,9,8758],"./r":[68120,9,9782],"./r.js":[68120,9,9782],"./ruby":[50798,9,226],"./ruby.js":[50798,9,226],"./rust":[22159,9,8168],"./rust.js":[22159,9,8168],"./sass":[55762,9,6629,2149],"./sass.js":[55762,9,6629,2149],"./shell":[54980,9,9776],"./shell.js":[54980,9,9776],"./sparql":[11731,9,643],"./sparql.js":[11731,9,643],"./spreadsheet":[69939,9,9190],"./spreadsheet.js":[69939,9,9190],"./sql":[18262,9,4086,9089],"./sql.js":[18262,9,4086,9089],"./stex":[38103,9,3897],"./stex.js":[38103,9,3897],"./text":[5369,9,8002],"./text.js":[5369,9,8002],"./xml":[83652,9,2624],"./xml.js":[83652,9,2624],"./yaml":[49443,9,9854],"./yaml-frontmatter":[95196,9,5707,7559],"./yaml-frontmatter.js":[95196,9,5707,7559],"./yaml.js":[49443,9,9854]};function r(e){if(!n.o(o,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],r=t[0];return Promise.all(t.slice(2).map(n.e)).then((()=>n.t(r,16|t[1])))}r.keys=()=>Object.keys(o),r.id=51238,e.exports=r},1427:(e,t,n)=>{var o={"./keymap_base":[26761,9762,3412,9160],"./keymap_base.js":[26761,9762,3412,9160],"./keymap_vim":[4509,2585,3235],"./keymap_vim.js":[4509,2585,3235]};function r(e){if(!n.o(o,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],r=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n.t(r,23)))}r.keys=()=>Object.keys(o),r.id=1427,e.exports=r},63586:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractTodos=function(e){for(var t=r(e),n=[],o=0;o<t.length;o++){var a=i(t[o]);a.status&&n.push(a)}return n.sort((function(e,t){return"NEXT"===e.status&&"NEXT"!==t.status?-1:"NEXT"===t.status&&"NEXT"!==e.status?1:"TODO"===e.status&&"TODO"!==t.status?-1:"TODO"===t.status&&"TODO"!==e.status?1:"DONE"===e.status&&"DONE"!==t.status&&"done"===t.todo_status?-1:"DONE"===t.status&&"DONE"!==e.status&&"done"===e.todo_status?1:"todo"===e.todo_status&&"todo"!==t.todo_status?-1:"done"===e.todo_status&&"done"!==t.todo_status?1:null!==e.priority&&null===t.priority?-1:null===e.priority&&null!==t.priority?1:null!==e.priority&&null!==t.priority&&e.priority!==t.priority?e.priority>t.priority?1:-1:!0===e.is_overdue&&!1===t.is_overdue?-1:!1===e.is_overdue&&!0===t.is_overdue?1:e.status===t.status?e.id<t.id?-1:1:void 0}));function i(e){var t=-1!==["TODO","NEXT","DOING","WAITING","PENDING"].indexOf(e.header.todo_keyword)?"todo":"done";return{key:e.header.todo_keyword,id:e.id,line:e.header.line,title:e.header.title,status:e.header.todo_keyword,todo_status:t,is_overdue:c(t,e.timestamps),priority:e.header.priority,scheduled:d(e.timestamps),deadline:s(e.timestamps),tasks:e.subtasks,tags:e.header.tags}}},t.extractEvents=function(e){for(var t=r(e),n=[],o=0;o<t.length;o++)n=n.concat(a(t[o]));return n.sort((function(e,t){return e.date-t.date}));function a(e){for(var t=[],n=0;n<e.timestamps.length;n++){var o=e.timestamps[n];if(!1!==o.active){var r=function(e){return e?-1!==["TODO","NEXT","DOING","WAITING","PENDING"].indexOf(e)?"todo":"done":null}(e.header.todo_keyword),a={id:e.id,line:e.header.line,title:e.header.title,status:e.header.todo_keyword,todo_status:r,scheduled:d(e.timestamps),deadline:s(e.timestamps),is_overdue:c(r,e.timestamps),priority:e.header.priority,tasks:[],tags:e.header.tags};if("done"!==a.todo_status){a.date=new Date(o.timestamp);var i=new Date;if(i.setHours(23),i.setMinutes(59),i.setSeconds(59),i.setMilliseconds(999),a.date<i&&(a.date=i),a.key=Intl.DateTimeFormat().format(a.date),a.date=a.date.toISOString(),o.repeat)if("m"===o.repeat.interval)t.push(a);else{"y"===o.repeat.interval?o.repeat.n*=365:"w"===o.repeat.interval&&(o.repeat.n*=7);for(var l=o.repeat.n,u=p(new Date),h=0;h<30;h++)(u-p(new Date(o.timestamp)))/1e3*60*60*24%l==0&&(a.date=u.getTime(),a.key=Intl.DateTimeFormat().format(u),t.push(JSON.parse(JSON.stringify(a)))),u.setDate(u.getDate()+1)}else t.push(a)}}}return t}},t.parse=r;var o=n(71037);function r(e){for(var t=[],n=u(0),r=void 0,s=void 0,d=[],c=e.split("\n"),p=0;p<c.length;p++)s=c[p],(r=a(s,p))?((d=d.filter((function(e){return e.level<r.level}))).push({level:r.level,tags:r.tags}),r.tags=d.reduce((function(e,t){return e.concat(t.tags)}),[]),n.header&&(t.push(n),n=u(p)),n.header=r):(r=l(s,p))?n.timestamps=n.timestamps.concat(r):(r=i(s,p))&&n.subtasks.push(r),p===c.length-1&&n.header&&t.push(n);return t;function u(e){return{id:(0,o.leftPad)(e.toString(),5)+(0,o.gid)(e),timestamps:[],subtasks:[]}}}function a(e,t){return e.match(/^(\*+)\s(?:([A-Z]{4,})\s){0,1}(?:\[\#([A-C])\]\s){0,1}(.*?)(?:\s+\:((?:[a-z]+\:){1,})){0,1}$/)?{line:t,level:RegExp.$1.length,todo_keyword:RegExp.$2||null,priority:RegExp.$3||null,title:RegExp.$4||"Empty Heading",tags:RegExp.$5.replace(/:/g," ").trim().split(" ").filter((function(e){return e}))}:null}function i(e,t){var n=e.match(/(?:-|\d+[\.\)])\s\[([X\s-])\]\s(.*)/);return n?{line:t,status:function(e){return"X"===e?"DONE":" "===e?"TODO":null}(n[1]),title:n[2]||"Empty task"}:null}function l(e,t,n){var o=/(?:([A-Z]+)\:\s){0,1}([<\[])(\d{4}-\d{2}-\d{2})[^>](?:[A-Z][a-z]{1,2})(?:\s([0-9]{2}\:[0-9]{2})){0,1}(?:\-([0-9]{2}\:[0-9]{2})){0,1}(?:\s(\+{1,2}[0-9]+[dwmy])){0,1}[\>\]](?:--[<\[](\d{4}-\d{2}-\d{2})\s[A-Z][a-z]{1,2}\s(\d{2}:\d{2}){0,1}[>\]]){0,1}/,r=e.match(o);if(!r)return n||null;var a={line:t,keyword:r[1],active:"<"===r[2],timestamp:new Date(r[3]+(r[4]?" "+r[4]:"")).toISOString(),range:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return n&&!o?new Date(e+" "+n)-new Date(e+" "+t):o?new Date(o+" "+r)-new Date(e+" "+t):null}(r[3],r[4],r[5],r[7],r[8]),repeat:function(e){return e?{n:parseInt(e.replace(/^.*([0-9]+).*$/,"$1")),interval:e.replace(/^.*([dwmy])$/,"$1")}:null}(r[6])};return n||(n=[]),n.push(a),l(e.replace(o,""),t,n)}function s(e){return e.filter((function(e){return"DEADLINE"===e.keyword}))[0]||null}function d(e){return e.filter((function(e){return"SCHEDULED"===e.keyword}))[0]||null}function c(e,t){return"todo"===e&&t.filter((function(e){return!(p(new Date)<p(new Date(e.timestamp))||"DEADLINE"!==e.keyword&&"SCHEDULED"!==e.keyword)})).length>0}function p(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}},89563:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Editor=t.EditorClass=void 0;var o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=p(n(67294)),i=p(n(45697)),l=n(16550),s=p(n(4631));n(31348),n(73986),n(32095),n(81699),n(14504),n(55292),n(88657),n(89700),n(3918),n(4328),n(82801),n(30908),n(57341);var d=n(57995),c=n(54647);function p(e){return e&&e.__esModule?e:{default:e}}n(81509),window.CodeMirror=s.default;var u=t.EditorClass=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:null,editor:null,filename:n.props.filename,listeners:[]},n._refresh=n._refresh.bind(n),n.onEdit=n.onEdit.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"_refresh",value:function(){this.state.editor&&this.state.editor.refresh()}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this._refresh),this.setState({loading:null,error:!1},(function(){window.setTimeout((function(){null===e.state.loading&&e.setState({loading:!0})}),200)})),this.loadKeybinding().then((function(){return e.loadMode(e.props.filename)})).then((function(t){return new Promise((function(n){e.setState({loading:!1},(function(){return n(t)}))}))})).then(function(e){var t=this,n=o(e,2),r=n[0],a=n[1],i=[],l=r(document.getElementById("editor"),{value:this.props.content,lineNumbers:!0,mode:a,keyMap:-1===["emacs","vim"].indexOf(CONFIG.editor)?"sublime":CONFIG.editor,lineWrapping:!0,readOnly:!this.props.readonly,foldOptions:{widget:"..."},matchBrackets:{},autoCloseBrackets:!0,matchTags:{bothTags:!0},autoCloseTags:!0});return"ontouchstart"in window||l.focus(),l.getWrapperElement().setAttribute("mode",a),this.props.onModeChange(a),l.on("change",this.onEdit),"orgmode"===a&&i.push(r.orgmode.init(l,(function(e,n){"shifttab"===e&&t.props.onFoldChange(n)}))),r.commands.save=function(){t.props.onSave&&t.props.onSave()},l.addKeyMap({"Ctrl-X Ctrl-C":function(e){window.history.back()}}),new Promise((function(e){t.setState({editor:l,listeners:i},e)}))}.bind(this)).then((function(){e.props.event.subscribe((function(t){var n=o(t,2),r=n[0],a=n[1];if("goTo"===r)e.state.editor.operation((function(t){e.state.editor.setSelection({line:a,ch:0},{line:a,ch:e.state.editor.getLine(a).length})})),requestAnimationFrame((function(){var t=e.state.editor.charCoords({line:a,ch:0},"local").top;e.state.editor.operation((function(n){e.state.editor.scrollTo(null,t),e.state.editor.setSelection({line:a,ch:0},{line:a,ch:e.state.editor.getLine(a).length})}))}));else if("refresh"===r){var i=e.state.editor.getCursor(),l=e.state.editor.listSelections();e.state.editor.setValue(e.props.content),e.state.editor.setCursor(i),l.length>0&&e.state.editor.setSelection(l[0].anchor,l[0].head)}else"fold"===r&&(e.props.onFoldChange((0,c.org_shifttab)(e.state.editor)),e.state.editor.refresh())}))}))}},{key:"onEdit",value:function(e){this.props.onChange&&this.props.onChange(e.getValue())}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._refresh),this.state.editor.off("change",this.onEdit),this.state.editor.clearHistory(),this.state.listeners.map((function(e){return e()}))}},{key:"loadMode",value:function(e){var t,o=e.split(".").pop();return o=o.replace(/~$/,"").replace(/\#$/,""),t="org"===o||"org_archive"===o?"orgmode":"sh"===o?"shell":"py"===o?"python":"html"===o||"htm"===o?"htmlmixed":"css"===o?"css":"less"===o||"scss"===o||"sass"===o?"sass":"js"===o||"json"===o?"javascript":"jsx"===o?"jsx":"php"===o||"php5"===o||"php4"===o?"php":"elm"===o?"elm":"erl"===o?"erlang":"go"===o?"go":"markdown"===o||"md"===o?"yaml-frontmatter":"pl"===o||"pm"===o?"perl":"clj"===o?"clojure":"el"===o||"lisp"===o||"cl"===o||"emacs"===o?"commonlisp":"Dockerfile"===o?"dockerfile":"R"===o?"r":"Makefile"===o?"cmake":"rb"===o?"ruby":"sql"===o?"sql":"xml"===o||"rss"===o||"svg"===o||"atom"===o?"xml":"yml"===o||"yaml"===o?"yaml":"lua"===o?"lua":"csv"===o?"spreadsheet":"rs"===o||"rlib"===o?"rust":"latex"===o||"tex"===o?"stex":"diff"===o||"patch"===o?"diff":"sparql"===o?"sparql":"properties"===o?"properties":"c"===o||"cpp"===o||"java"===o||"h"===o?"clike":"text",n(51238)("./"+t).catch((function(){return n.e(8002).then(n.bind(n,5369))})).then((function(e){return Promise.resolve([e.default,t])}))}},{key:"loadKeybinding",value:function(){return"emacs"!==CONFIG.editor&&CONFIG.editor?n(1427)("./keymap_"+CONFIG.editor):Promise.resolve()}},{key:"render",value:function(){return a.default.createElement("div",{className:"component_editor"},a.default.createElement(d.NgIf,{cond:!0===this.state.loading},a.default.createElement(d.Loader,null)),a.default.createElement(d.NgIf,{cond:!1===this.state.loading},a.default.createElement("div",{id:"editor"})))}}]),t}();u.propTypes={content:i.default.string.isRequired,filename:i.default.string.isRequired,onChange:i.default.func,onSave:i.default.func},t.Editor=(0,l.withRouter)(u)},54647:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fold=m,t.unfold=f,t.isFold=g,t.org_cycle=function(e){var t=e.getCursor();g(e,t)?f(e,t):m(e,t)};var n={stab:"CONTENT"},o=t.org_set_fold=function(e){var t=e.getCursor();return r(e,n.stab),e.setCursor(t),n.stab};function r(e,t){"OVERVIEW"===t?function(e){e.operation((function(){for(var t=e.firstLine(),n=e.lastLine();t<=n;t++)m(e,CodeMirror.Pos(t,0))}))}(e):"SHOW_ALL"===t?function(e){e.operation((function(){for(var t=e.firstLine(),n=e.lastLine();t<=n;t++)!0===/header/.test(e.getTokenTypeAt(CodeMirror.Pos(t,0)))&&f(e,CodeMirror.Pos(t,0))}))}(e):"CONTENT"===t&&function(e){e.operation((function(){for(var t=null,n=e.firstLine(),o=e.lastLine();n<=o;n++)if(m(e,CodeMirror.Pos(n,0)),!0===/header/.test(e.getTokenTypeAt(CodeMirror.Pos(n,0)))){var r=e.getLine(n).replace(/^(\*+).*/,"$1").length;t&&r>t.level&&f(e,CodeMirror.Pos(t.line,0)),t={line:n,level:r}}}))}(e),e.refresh()}function a(e,t){var n=null;if(n=p(e,t))n.level>1&&e.replaceRange("",{line:n.start,ch:0},{line:n.start,ch:1});else if(n=d(e,t))for(var o=n.start;o<=n.end;o++)n.level>0&&e.replaceRange("",{line:o,ch:0},{line:o,ch:2});else if(n=c(e,t)){for(var r=n.start;r<=n.end;r++)n.level>0&&e.replaceRange("",{line:r,ch:0},{line:r,ch:3});u(e,t)}}function i(e,t){var n=null,o=null;if(n=p(e,t))e.replaceRange("*",{line:n.start,ch:0});else if(n=d(e,t)){if((o=d(e,n.start-1))&&n.level<o.level+1)for(var r=n.start;r<=n.end;r++)e.replaceRange("  ",{line:r,ch:0})}else if((n=c(e,t))&&(o=c(e,n.start-1))&&n.level<o.level+1){for(var a=n.start;a<=n.end;a++)e.replaceRange("   ",{line:a,ch:0});u(e,n.start)}}t.org_shifttab=function(e){return"SHOW_ALL"===n.stab?n.stab="OVERVIEW":"OVERVIEW"===n.stab?n.stab="CONTENT":"CONTENT"===n.stab&&(n.stab="SHOW_ALL"),r(e,n.stab),n.stab},t.org_metaleft=function(e){a(e,e.getCursor().line)},t.org_metaright=function(e){i(e,e.getCursor().line)},t.org_meta_return=function(e){var t=e.getCursor().line,n=e.getLine(t),o=null;if(o=d(e,t)){var r=o.level;e.replaceRange("\n"+" ".repeat(2*r)+"- ",{line:o.end,ch:e.getLine(o.end).length}),e.setCursor({line:o.end+1,ch:2*r+2})}else if(o=c(e,t)){var a=o.level;e.replaceRange("\n"+" ".repeat(3*a)+(o.n+1)+". ",{line:o.end,ch:e.getLine(o.end).length}),e.setCursor({line:o.end+1,ch:3*a+3}),u(e,t)}else if(o=p(e,t)){var i=function(e,t,n){var o=void 0,r=void 0;for(r=n-1;r>0;r--)if(null!==(o=p(e,n)))return o;return null}(e,0,t),l=i&&i.level||1;e.replaceRange("\n"+"*".repeat(l)+" ",{line:t,ch:n.length}),e.setCursor({line:t+1,ch:l+1})}else""===n.trim()?(e.replaceRange("* ",{line:t,ch:0}),e.setCursor({line:t,ch:2})):(e.replaceRange("\n\n* ",{line:t,ch:n.length}),e.setCursor({line:t+2,ch:2}))};var l=["TODO","DONE",""];function s(e){var t="*".repeat(e.level)+" ";return e.status&&(t+=e.status+" "),t+e.content}function d(e,t){var n=function(e,t){var n=void 0;do{if(n=e.getLine(t),/^\s*\-/.test(n))return t;if(!1===/^\s+/.test(n))break;t-=1}while(t>=0);return null}(e,t);if(null===n)return null;t=n;var o=e.getLine(t);if(o&&("-"!==o.trimLeft()[0]||" "!==o.trimLeft()[1]))return null;var r=o.replace(/^(\s*).*$/,"$1").length;return r%2!=0?null:{type:"list",level:r/2,content:o.trimLeft().replace(/^\s*\-\s(.*)$/,"$1"),start:t,end:function(e,t){var n=t,o=null;do{if(t+=1,void 0===(o=e.getLine(t))||"-"===o.trimLeft()[0])break;if(!/^\s+/.test(o))break;n=t}while(t<=e.lineCount());return n}(e,t)}}function c(e,t){var n=function(e,t){var n=void 0;do{if(n=e.getLine(t),/^\s*[0-9]+[\.\)]\s/.test(n))return t;if(!1===/^\s+/.test(n))break;t-=1}while(t>=0);return null}(e,t);if(null===n)return null;t=n;var o=e.getLine(t);if(!1===/^[0-9]+[\.\)]\s.*$/.test(o&&o.trimLeft()))return null;var r=o.replace(/^(\s*)[0-9]+.*$/,"$1").length;return r%3!=0?null:{type:"numbered",level:r/3,content:o.trimLeft().replace(/^[0-9]+[\.\)]\s(.*)$/,"$1"),start:t,end:function(e,t){var n=t,o=null;do{if(t+=1,void 0===(o=e.getLine(t))||/^[0-9]+[\.\)]/.test(o.trimLeft()))break;if(!/^\s+/.test(o))break;n=t}while(t<=e.lineCount());return n}(e,t),n:parseInt(o.trimLeft().replace(/^([0-9]+).*$/,"$1")),separator:o.trimLeft().replace(/^[0-9]+([\.\)]).*$/,"$1")}}function p(e,t,n){var o=e.getLine(t);if(!1===/^\*+\s/.test(o))return null;var r=o.match(/^(\*+)([\sA-Z]*)\s(.*)$/),a=r[1].length;return void 0!==n&&n!==a||null===r?null:{type:"title",level:a,content:r[3],start:t,end:function(e,t){var n=t,o=null;do{if(t+=1,void 0===(o=e.getLine(t)))break;var r=o.match(/^(\*+)\s.*/);if(r&&r[1]&&(r[1].length===a||r[1].length<a))break;n=t}while(t<=e.lineCount());return n}(e,t),status:r[2].trim()}}function u(e,t){for(var n=function(e,t){var n=void 0,o=void 0,r=void 0,a=t;do{if(n=e.getLine(t),o=c(e,t),r=/(\s+).*$/.exec(n),o&&(a=t),!o||!r)break;t-=1}while(t>=0);return a}(e,t),o=function(e,t){var n=void 0,o=void 0,r=void 0,a=t;do{if(n=e.getLine(t),o=c(e,t),r=/(\s+).*$/.exec(n),o&&(a=t),!o||!r)break;t+=1}while(t<e.lineCount());return a}(e,t),r=null,a=void 0,i=n;i<=o;i++){if(a=c(e,i))if(r){if(a.level===r.level){var l=p(e,a.start,n,a.level);l&&a.n!==l.n+1&&h(e,a.start,l.n+1)}else if(a.level>r.level)1!==a.n&&h(e,a.start,1);else if(a.level<r.level){var s=p(e,a.start,n,a.level);s&&a.n!==s.n+1&&h(e,a.start,s.n+1)}}else 1!==a.n&&h(e,a.start,1);(a=c(e,i)||d(e,i))&&(r?a.level>r.level&&a.level!==r.level+1&&u(e,[a.start,a.end],r.level+1,a.type):0!==a.level&&u(e,[a.start,a.end],0,a.type)),r=a,a&&(i+=a.end-a.start)}function p(e,t,n,o){var r=void 0;do{if((r=c(e,t-=1))&&r.level===o)return r}while(t>n);return null}function u(t,n,o,r){var a=void 0,i=void 0;for(i=n[0];i<=n[1];i++){a=e.getLine(i).trimLeft();var l=function(e,t,a){var l=3*o;return i-n[0]>0&&(l+="numbered"===r?3:2),l}();a=" ".repeat(l)+a,e.replaceRange(a,{line:i,ch:0},{line:i,ch:t.getLine(i).length})}}function h(t,n,o){var r=t.getLine(n),a=r.replace(/[0-9]+\./,o+".");e.replaceRange(a,{line:n,ch:0},{line:n,ch:r.length})}}function h(e,t,n){var o=e.getRange({line:t[0],ch:0},{line:t[1],ch:e.getLine(t[1]).length}),r=e.getRange({line:n[0],ch:0},{line:n[1],ch:e.getLine(n[1]).length}),a=e.getCursor();n[0]>t[0]?(e.replaceRange(o,{line:n[0],ch:0},{line:n[1],ch:e.getLine(n[1]).length}),e.replaceRange(r,{line:t[0],ch:0},{line:t[1],ch:e.getLine(t[1]).length}),e.setCursor({line:a.line+(n[1]-n[0]+1),ch:a.ch})):(e.replaceRange(r,{line:t[0],ch:0},{line:t[1],ch:e.getLine(t[1]).length}),e.replaceRange(o,{line:n[0],ch:0},{line:n[1],ch:e.getLine(n[1]).length}),e.setCursor({line:a.line-(n[1]-n[0]+1),ch:a.ch}))}function m(e,t){e.foldCode(t,null,"fold")}function f(e,t){e.foldCode(t,null,"unfold")}function g(e,t){for(var n=t.line,o=e.findMarks(CodeMirror.Pos(n,0),CodeMirror.Pos(n+1,0)),r=0;r<o.length;++r)if(o[r].__isFold&&o[r].find().from.line==n)return o[r];return!1}t.org_shiftleft=function(e){var t=[].concat(l.slice(0).reverse(),l.slice(-1)),n=e.getCursor().line,o=e.getLine(n),r=p(e,n);null!==r&&(r.status=t[t.indexOf(r.status)+1],e.replaceRange(s(r),{line:n,ch:0},{line:n,ch:o.length}))},t.org_shiftright=function(e){e.operation((function(){var t=[].concat(l,[l[0]]),n=e.getCursor().line,o=e.getLine(n),r=p(e,n);null!==r&&(r.status=t[t.indexOf(r.status)+1],e.replaceRange(s(r),{line:n,ch:0},{line:n,ch:o.length}))}))},t.org_insert_todo_heading=function(e){e.operation((function(){var t=e.getCursor().line,n=e.getLine(t),o=null;if(o=d(e,t)){var r=o.level;e.replaceRange("\n"+" ".repeat(2*r)+"- [ ] ",{line:o.end,ch:e.getLine(o.end).length}),e.setCursor({line:t+1,ch:6+2*r})}else if(o=c(e,t)){var a=o.level;e.replaceRange("\n"+" ".repeat(3*a)+(o.n+1)+". [ ] ",{line:o.end,ch:e.getLine(o.end).length}),e.setCursor({line:o.end+1,ch:3*a+7}),u(e,t)}else if(o=p(e,t)){var i=o&&o.level||1;e.replaceRange("\n"+"*".repeat(i)+" TODO ",{line:t,ch:n.length}),e.setCursor({line:t+1,ch:i+6})}else""===n.trim()?(e.replaceRange("* TODO ",{line:t,ch:0}),e.setCursor({line:t,ch:7})):(e.replaceRange("\n\n* TODO ",{line:t,ch:n.length}),e.setCursor({line:t+2,ch:7}))}))},t.org_metaup=function(e){e.operation((function(){var t=e.getCursor().line,n=null;if(n=d(e,t)){var r=d(e,n.start-1);r&&(h(e,[n.start,n.end],[r.start,r.end]),u(e,t))}else if(n=c(e,t)){var a=c(e,n.start-1);a&&(h(e,[n.start,n.end],[a.start,a.end]),u(e,t))}else if(n=p(e,t)){var i=t,l=void 0;do{if(l=p(e,i-=1,n.level))break}while(i>0);l&&(h(e,[n.start,n.end],[l.start,l.end]),o(e))}}))},t.org_metadown=function(e){e.operation((function(){var t=e.getCursor().line,n=null;if(n=d(e,t)){var r=d(e,n.end+1);r&&h(e,[n.start,n.end],[r.start,r.end])}else if(n=c(e,t)){var a=c(e,n.end+1);a&&h(e,[n.start,n.end],[a.start,a.end]),u(e,t)}else if(n=p(e,t)){var i=p(e,n.end+1,n.level);i&&(h(e,[n.start,n.end],[i.start,i.end]),o(e))}}))},t.org_shiftmetaright=function(e){e.operation((function(){var t,n=e.getCursor().line;if(t=p(e,n)){i(e,n);for(var o=t.start+1;o<=t.end;o++)p(e,o)&&i(e,o)}}))},t.org_shiftmetaleft=function(e){e.operation((function(){var t,n=e.getCursor().line;if(t=p(e,n)){if(1===t.level)return;a(e,n);for(var o=t.start+1;o<=t.end;o++)p(e,o)&&a(e,o)}}))}},33643:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDE=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=m(n(67294)),a=m(n(19081)),i=n(16550),l=n(88314),s=n(57995),d=n(71037),c=n(89563),p=n(8589),u=n(92127),h=n(4070);function m(e){return e&&e.__esModule?e:{default:e}}n(4129);var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={event:new l.Subject,contentToSave:e.content,appear_agenda:!1,appear_todo:!1,mode:null,folding:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentDidMount",value:function(){var e=this;this.unblock=this.props.history.block((function(t){return!1===e.props.needSaving||(d.confirm.now(r.default.createElement("div",{style:{textAlign:"center",paddingBottom:"5px"}},(0,h.t)("Do you want to save the changes ?")),(function(){return e.save().then((function(){return e.props.history.push(t)}))}),(function(){e.props.needSavingUpdate(!1).then((function(){return e.props.history.push(t)}))})),!1)}))}},{key:"componentWillUnmount",value:function(){this.unblock(),window.clearInterval(this.state.id)}},{key:"save",value:function(){if(!1!==this.props.needSaving)return this.props.onSave(new window.Blob([this.state.contentToSave],{type:"text/plain"}))}},{key:"onUpdate",value:function(e,t,n){var o=this;this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,n),(function(){t&&o.state.event.next(["refresh"]),o.props.content===o.state.contentToSave?o.props.needSavingUpdate(!1):o.props.needSavingUpdate(!0)}))}},{key:"toggleAgenda",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState({appear_agenda:null===e?!this.state.appear_agenda:!!e})}},{key:"toggleTodo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState({appear_todo:null===e?!this.state.appear_todo:!!e})}},{key:"onModeChange",value:function(){this.state.event.next(["fold"])}},{key:"goTo",value:function(e){this.state.event.next(["goTo",e])}},{key:"download",value:function(){var e=this;document.cookie="download=yes; path=/; max-age=120;",this.setState({refresh:Date.now(),id:window.setInterval((function(){!1===/download=yes/.test(document.cookie)&&(window.clearInterval(e.state.id),e.setState({refresh:Date.now()}))}),100)})}},{key:"render",value:function(){var e=this,t=function(e,t){return e.replace(/\.org$/,"."+t)};return r.default.createElement("div",{className:"component_ide"},r.default.createElement(p.MenuBar,{title:this.props.filename,download:"orgmode"===this.state.mode?null:this.props.url},r.default.createElement(s.NgIf,{type:"inline",cond:"orgmode"===this.state.mode},r.default.createElement("span",{onClick:this.onModeChange.bind(this)},r.default.createElement(s.NgIf,{cond:"SHOW_ALL"===this.state.folding,type:"inline"},r.default.createElement(s.Icon,{name:"arrow_up_double"})),r.default.createElement(s.NgIf,{cond:"OVERVIEW"===this.state.folding,type:"inline"},r.default.createElement(s.Icon,{name:"arrow_down"})),r.default.createElement(s.NgIf,{cond:"CONTENT"===this.state.folding,type:"inline"},r.default.createElement(s.Icon,{name:"arrow_down_double"}))),r.default.createElement(s.Dropdown,{className:"view sort",onChange:function(){return e.download()},enable:!/download=yes/.test(document.cookie)},r.default.createElement(s.DropdownButton,null,r.default.createElement(s.Icon,{name:/download=yes/.test(document.cookie)?"loading_white":"download_white"})),r.default.createElement(s.DropdownList,null,r.default.createElement(s.DropdownItem,{name:"na"},r.default.createElement("a",{download:this.props.filename,href:this.props.url},(0,h.t)("Save current file"))),r.default.createElement(s.DropdownItem,{name:"na"},r.default.createElement("a",{target:this.props.needSaving?"_blank":"_self",href:"/api/export/"+((0,d.currentShare)()||"private")+"/text/html"+this.props.path},(0,h.t)("Export as {{VALUE}}","HTML"))),r.default.createElement(s.DropdownItem,{name:"na"},r.default.createElement("a",{target:this.props.needSaving?"_blank":"_self",href:"/api/export/"+((0,d.currentShare)()||"private")+"/application/pdf"+this.props.path},(0,h.t)("Export as {{VALUE}}","PDF"))),r.default.createElement(s.DropdownItem,{name:"na"},r.default.createElement("a",{target:this.props.needSaving?"_blank":"_self",href:"/api/export/"+((0,d.currentShare)()||"private")+"/text/markdown"+this.props.path},(0,h.t)("Export as {{VALUE}}","Markdown"))),r.default.createElement(s.DropdownItem,{name:"na"},r.default.createElement("a",{target:this.props.needSaving?"_blank":"_self",href:"/api/export/"+((0,d.currentShare)()||"private")+"/text/plain"+this.props.path},(0,h.t)("Export as {{VALUE}}","TXT"))),r.default.createElement(s.DropdownItem,{name:"na"},r.default.createElement("a",{target:this.props.needSaving?"_blank":"_self",download:t(this.props.filename,"tex"),href:"/api/export/"+((0,d.currentShare)()||"private")+"/text/x-latex"+this.props.path},(0,h.t)("Export as {{VALUE}}","Latex"))),r.default.createElement(s.DropdownItem,{name:"na"},r.default.createElement("a",{target:this.props.needSaving?"_blank":"_self",download:t(this.props.filename,"ics"),href:"/api/export/"+((0,d.currentShare)()||"private")+"/text/calendar"+this.props.path},(0,h.t)("Export as {{VALUE}}","ical"))),r.default.createElement(s.DropdownItem,{name:"na"},r.default.createElement("a",{target:this.props.needSaving?"_blank":"_self",download:t(this.props.filename,"odt"),href:"/api/export/"+((0,d.currentShare)()||"private")+"/application/vnd.oasis.opendocument.text"+this.props.path},(0,h.t)("Export as {{VALUE}}","Open office"))),r.default.createElement(s.DropdownItem,{name:"na"},r.default.createElement("a",{target:this.props.needSaving?"_blank":"_self",download:t(this.props.filename,"pdf"),href:"/api/export/"+((0,d.currentShare)()||"private")+"/application/pdf"+this.props.path+"?mode=beamer"},(0,h.t)("Export as {{VALUE}}","Beamer"))))),r.default.createElement("span",{onClick:this.toggleAgenda.bind(this)},r.default.createElement(s.Icon,{name:"calendar_white"})),r.default.createElement("span",{onClick:this.toggleTodo.bind(this)},r.default.createElement(s.Icon,{name:"todo_white"})))),r.default.createElement(a.default,{transitionName:"editor",transitionAppear:!0,transitionEnter:!1,transitionLeave:!1,transitionAppearTimeout:300,className:"editor_container"},r.default.createElement(c.Editor,{onSave:this.save.bind(this),filename:this.props.filename,content:this.state.contentToSave,readonly:/PUT/.test(this.props.acl),event:this.state.event.asObservable(),onModeChange:this.onUpdate.bind(this,"mode",!1),onFoldChange:this.onUpdate.bind(this,"folding",!1),onChange:this.onUpdate.bind(this,"contentToSave",!1)})),r.default.createElement(a.default,{transitionName:"fab",transitionLeave:!0,transitionEnter:!0,transitionAppear:!0,transitionAppearTimeout:400,transitionEnterTimeout:400,transitionLeaveTimeout:200},r.default.createElement(s.NgIf,{cond:!!this.props.needSaving||!!this.props.isSaving},r.default.createElement(s.NgIf,{cond:!this.props.isSaving},r.default.createElement(s.Fab,{onClick:this.save.bind(this)},r.default.createElement(s.Icon,{name:"save",style:{height:"100%",width:"100%"}}))),r.default.createElement(s.NgIf,{cond:this.props.isSaving},r.default.createElement(s.Fab,null,r.default.createElement(s.Icon,{name:"loading",style:{height:"100%",width:"100%"}}))))),r.default.createElement(u.OrgEventsViewer,{isActive:this.state.appear_agenda,content:this.state.contentToSave,onUpdate:this.onUpdate.bind(this,"contentToSave",!0),goTo:this.goTo.bind(this),onQuit:this.toggleAgenda.bind(this,!1)}),r.default.createElement(u.OrgTodosViewer,{isActive:this.state.appear_todo,content:this.state.contentToSave,onUpdate:this.onUpdate.bind(this,"contentToSave",!0),goTo:this.goTo.bind(this),onQuit:this.toggleTodo.bind(this,!1)}))}}]),t}();t.IDE=(0,i.withRouter)(f)},92127:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrgTodosViewer=t.OrgEventsViewer=void 0;var o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(67294)),l=n(58439),s=n(57995),d=n(63586),c=n(58799),p=n(71037),u=n(4070);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(68675),t.OrgEventsViewer=function(e){function t(){return h(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,i.default.Component),a(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.content!==e.content||this.props.isActive!==e.isActive}},{key:"render",value:function(){var e=this.props.isActive?(0,d.extractEvents)(this.props.content):[];return i.default.createElement(g,{title:"Agenda",headlines:e,content:this.props.content,isActive:this.props.isActive,onQuit:this.props.onQuit,goTo:this.props.goTo,onUpdate:this.props.onUpdate})}}]),t}(),t.OrgTodosViewer=function(e){function t(){return h(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,i.default.Component),a(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.content!==e.content||this.props.isActive!==e.isActive}},{key:"render",value:function(){var e=this.props.isActive?(0,d.extractTodos)(this.props.content):[];return i.default.createElement(g,{title:"Todos",headlines:e,content:this.props.content,isActive:this.props.isActive,onQuit:this.props.onQuit,goTo:this.props.goTo,onUpdate:this.props.onUpdate})}}]),t}();var g=function(e){function t(e){h(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={headlines:n.buildHeadlines(e.headlines),content:e.content,search:"",_:null},n.rerender=function(){return n.setState({_:(0,p.randomString)()})},n.findResults=(0,p.debounce)(n.findResults.bind(n),150),n}return f(t,i.default.Component),a(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({headlines:this.buildHeadlines(e.headlines),content:e.content})}},{key:"buildHeadlines",value:function(e){return e.reduce((function(e,t){return e[t.key]||(e[t.key]=[]),e[t.key].push(t),e}),{})}},{key:"onChange",value:function(e,t,n){r({},this.state.headlines)[Object.keys(this.state.headlines)[e]][t].status=n,this.setState({headlines:this.state.headlines})}},{key:"onTaskUpdate",value:function(e,t,n){var r=this.state.content.split("\n"),a=void 0,i=void 0,l=void 0,s=void 0,d=void 0,p=void 0;switch(e){case"status":r[t]=r[t].replace(/^(\*+\s)[A-Z]{3,}(\s.*)$/,"$1"+n+"$2");break;case"subtask":r[t]="DONE"===n?r[t].replace(/\[.\]/,"[X]"):r[t].replace(/\[.\]/,"[ ]");break;case"existing_scheduled":var u=o(t,3);a=u[0],l=u[1],r[i=u[2]]=r[i].replace(/SCHEDULED: <.*?>\s*/,n?"SCHEDULED: "+g(n)+" ":""),this.state.headlines[l]=this.state.headlines[l].map((function(e){return e.line===a&&(n?e.scheduled.timestamp=new Date(n).toISOString():e.scheduled=null),e})),this.setState({headlines:this.state.headlines});break;case"existing_deadline":var h=o(t,3);a=h[0],l=h[1],r[i=h[2]]=r[i].replace(/DEADLINE: <.*?>\s*/,n?"DEADLINE: "+g(n):""),this.state.headlines[l]=this.state.headlines[l].map((function(e){return e.line===a&&(n?e.deadline.timestamp=new Date(n).toISOString():e.deadline=null),e})),this.setState({headlines:this.state.headlines});break;case"new_scheduled":var m=o(t,3);a=m[0],l=m[1],null!==(s=m[2])?(p=s,r[s]="SCHEDULED: "+g(n)+" "+r[s]):""===r[p=a+1]&&""===r[p+1]?r[p]="SCHEDULED: "+g(n):r.splice(p,0,"SCHEDULED: "+g(n)),this.state.headlines[l]=this.state.headlines[l].map((function(e){return e.line===a&&(e.scheduled={line:p,keyword:"SCHEDULED",active:!0,range:null,repeat:null,timestamp:new Date(n).toISOString()}),e})),this.setState({headlines:this.state.headlines});break;case"new_deadline":var f=o(t,3);a=f[0],l=f[1],null!==(d=f[2])?(p=d,r[d]=r[d]+" DEADLINE: "+g(n)):(""===r[p=a+1]&&""===r[p+1]?r[p]="DEADLINE: "+g(n):r.splice(p,0,"DEADLINE: "+g(n)),this.state.headlines[l]=this.state.headlines[l].map((function(e){return e.line===a&&(e.deadline={line:p,keyword:"DEADLINE",active:!0,range:null,repeat:null,timestamp:new Date(n).toISOString()}),e})),this.setState({headlines:this.state.headlines}))}function g(e){var t=new Date(e);return"<"+t.getFullYear()+"-"+(0,c.leftPad)((t.getMonth()+1).toString(),2)+"-"+(0,c.leftPad)(t.getDate().toString(),2)+" "+function(e){if("de"!==navigator.language.split("-")[0])return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e]}(t.getDay())+">"}this.setState({content:r.join("\n")})}},{key:"navigate",value:function(e){this.props.goTo(e),this.onQuit()}},{key:"onQuit",value:function(){this.props.onUpdate(this.state.content),this.props.onQuit()}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.rerender)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.rerender)}},{key:"search",value:function(e){var t=this;this.setState({search:e},(function(){t.findResults(e)}))}},{key:"findResults",value:function(e){var t=this.props.headlines;e&&(t=this.props.headlines.filter((function(t){var n=e.split(" "),o=function(){var e=" ";return e+=t.status+" ",e+=t.title+" ",e+=t.tags.map((function(e){return"#"+e})).join(" ")+" ",e+=t.scheduled?"scheduled "+t.scheduled.timestamp+" ":"",e+=t.deadline?"deadline "+t.deadline.timestamp+" ":"",e+=t.priority?"priority #"+t.priority+" ":"",(e+=t.is_overdue?"overdue ":"")+t.tasks.map((function(e){return e.title})).join(" ")+" "}();return n.filter((function(e){return new RegExp(" "+e,"i").test(o)})).length===n.length}))),this.setState({headlines:this.buildHeadlines(t)})}},{key:"render",value:function(){var e=this;return i.default.createElement(s.Modal,{className:"todo-modal",isActive:this.props.isActive,onQuit:this.onQuit.bind(this)},i.default.createElement("div",{className:"modal-top no-select"},i.default.createElement("span",{onClick:this.onQuit.bind(this)},i.default.createElement(s.Icon,{name:"close"})),i.default.createElement("h1",null,this.props.title),i.default.createElement(s.NgIf,{className:"search",cond:this.props.headlines.length>0},i.default.createElement("label",{className:this.state.search.length>0?"active":""},i.default.createElement("input",{type:"text",onChange:function(t){return e.search(t.target.value)},placeholder:(0,u.t)("Search")+" ..."}),i.default.createElement(s.Icon,{name:"search"})))),i.default.createElement(s.NgIf,{cond:0===this.props.headlines.length,className:"nothing"},(0,u.t)("empty")),i.default.createElement(s.NgIf,{cond:this.props.headlines.length>0},i.default.createElement(l.StickyContainer,{className:"container",style:{height:window.innerHeight>750?545:window.innerHeight-202}},Object.keys(this.state.headlines).map((function(t,n){return i.default.createElement("div",{key:n},i.default.createElement(l.Sticky,{relative:!0},(function(n){var o=n.style;return i.default.createElement("div",{className:"sticky_header no-select",style:r({},o,{overflow:"auto",background:"white",zIndex:4})},i.default.createElement("h2",null,t," ",i.default.createElement("span",null,e.state.headlines[t].length)))})),i.default.createElement("div",{className:"list"},e.state.headlines[t].map((function(t,o){return i.default.createElement(v,{type:e.props.title.toLowerCase(),onTaskUpdate:e.onTaskUpdate.bind(e),onChange:e.onChange.bind(e,n,o),tasks:t.tasks,key:o,title:t.title,tags:t.tags,line:t.line,date:t.date,overdue:t.is_overdue,scheduled:t.scheduled,deadline:t.deadline,sortKey:t.key,status:t.status||null,todo_status:t.todo_status,todo_priority:t.priority,goTo:e.navigate.bind(e,t.line)})}))))})))))}}]),t}(),v=function(e){function t(e){h(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={status:e.todo_status,properties:!1},n}return f(t,i.default.Component),a(t,[{key:"onMenuAction",value:function(e){"navigate"===e?this.props.goTo():"properties"===e&&this.setState({properties:!this.state.properties})}},{key:"onStatusToggle",value:function(){if(this.props.todo_status){var e="todo"===this.state.status?"done":"todo";this.setState({status:e});var t=function(e,t,n){return e===t?n:"todo"===e?"TODO":"DONE"}(e,this.props.todo_status,this.props.status);this.props.onTaskUpdate("status",this.props.line,t)}}},{key:"onTimeSet",value:function(e,t,n){if(!0===t)this.props.onTaskUpdate("existing_"+e,[this.props.line,this.props.sortKey,this.props[e].line],n);else{var o="scheduled"===e?"deadline":"scheduled";this.props.onTaskUpdate("new_"+e,[this.props.line,this.props.sortKey,this.props[o]&&this.props[o].line||null],n)}}},{key:"render",value:function(){var e=this,t=function(e){if(!e||!e.timestamp)return"";var t=new Date(e.timestamp);return t.getFullYear()+"-"+(0,c.leftPad)((t.getMonth()+1).toString(),2)+"-"+(0,c.leftPad)(t.getDate().toString(),2)};return i.default.createElement("div",{className:"component_headline"},i.default.createElement("div",{className:"no-select headline-main "+(this.state.status||"")},i.default.createElement("div",{className:"title",onClick:this.onStatusToggle.bind(this)},i.default.createElement("div",{className:(this.props.todo_priority?this.props.todo_priority+" ":"")+(!0===this.props.overdue?"overdue":"")},i.default.createElement("span",{className:"label"},this.props.title),i.default.createElement(s.NgIf,{cond:null!==this.props.scheduled&&this.props.scheduled.timestamp===this.props.date,type:"inline"},i.default.createElement(s.Icon,{name:"schedule"})),i.default.createElement(s.NgIf,{cond:null!==this.props.deadline&&this.props.deadline.timestamp===this.props.date,type:"inline"},i.default.createElement(s.Icon,{name:"deadline"})),i.default.createElement("div",{className:"tags"},this.props.tags.map((function(e,t){return i.default.createElement("span",{className:"tag",key:t},e)}))))),i.default.createElement(s.Dropdown,{onChange:this.onMenuAction.bind(this)},i.default.createElement(s.DropdownButton,null,i.default.createElement(s.Icon,{name:"more"})),i.default.createElement(s.DropdownList,null,i.default.createElement(s.DropdownItem,{name:"navigate",icon:"arrow_right"}," ",(0,u.t)("Navigate")," "),i.default.createElement(s.DropdownItem,{name:"properties"}," ",(0,u.t)("Properties")," ")))),i.default.createElement(s.NgIf,{className:"headline-properties",cond:this.state.properties},i.default.createElement("div",null,i.default.createElement("label",null," ",i.default.createElement(s.Icon,{name:"schedule"}),i.default.createElement(s.NgIf,{cond:null!==this.props.scheduled},i.default.createElement("input",{type:"date",value:t(this.props.scheduled),onChange:function(t){return e.onTimeSet("scheduled",!0,t.target.value)}})),i.default.createElement(s.NgIf,{cond:null===this.props.scheduled},i.default.createElement("input",{type:"date",onChange:function(t){return e.onTimeSet("scheduled",!1,t.target.value)}})))),i.default.createElement("div",null,i.default.createElement("label",null," ",i.default.createElement(s.Icon,{name:"deadline"}),i.default.createElement(s.NgIf,{cond:null!==this.props.deadline},i.default.createElement("input",{type:"date",value:t(this.props.deadline),onChange:function(t){return e.onTimeSet("deadline",!0,t.target.value)}})),i.default.createElement(s.NgIf,{cond:null===this.props.deadline},i.default.createElement("input",{type:"date",onChange:function(t){return e.onTimeSet("deadline",!1,t.target.value)}}))))),i.default.createElement(s.NgIf,{cond:this.props.tasks.length>0&&"todo"===this.state.status&&"todos"===this.props.type,className:"subtask_container"},this.props.tasks.map((function(t,n){return i.default.createElement(b,{key:n,label:t.title,status:t.status,onStatusChange:e.props.onTaskUpdate.bind(e,"subtask",t.line)})}))))}}]),t}(),b=function(e){function t(e){h(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.calculateState(),n}return f(t,i.default.Component),a(t,[{key:"calculateState",value:function(){return{checked:"DONE"===this.props.status}}},{key:"updateState",value:function(e){var t=this,n=e.target.checked;this.setState({checked:n},(function(){window.setTimeout((function(){window.requestAnimationFrame((function(){t.props.onStatusChange(n?"DONE":"TODO")}))}),0)}))}},{key:"render",value:function(){return i.default.createElement("div",{className:"component_subtask no-select"},i.default.createElement("label",null,i.default.createElement(s.Input,{type:"checkbox",checked:this.state.checked,onChange:this.updateState.bind(this)}),i.default.createElement("span",null,this.props.label)))}}]),t}()},81509:(e,t,n)=>{"use strict";var o=n(59107);"string"==typeof o&&(o=[[e.id,o,""]]),n(76723)(o,{hmr:!0,transform:void 0,insertInto:void 0}),o.locals&&(e.exports=o.locals)},4129:(e,t,n)=>{"use strict";var o=n(2780);"string"==typeof o&&(o=[[e.id,o,""]]),n(76723)(o,{hmr:!0,transform:void 0,insertInto:void 0}),o.locals&&(e.exports=o.locals)},68675:(e,t,n)=>{"use strict";var o=n(95185);"string"==typeof o&&(o=[[e.id,o,""]]),n(76723)(o,{hmr:!0,transform:void 0,insertInto:void 0}),o.locals&&(e.exports=o.locals)},59107:(e,t,n)=>{(e.exports=n(9252)(!1)).push([e.id,'.component_editor{display:flex;flex-grow:1;min-height:0;width:100%}.component_editor>div{width:100%;position:relative}.component_editor>div #editor{width:100%;position:absolute;left:0;top:0;bottom:0}.CodeMirror{width:100%;height:100%;color:#3b4045;background:var(--bg-color)}.CodeMirror-sizer>div{padding-top:4px;padding-bottom:5px}.CodeMirror-scroll{-webkit-overflow-scrolling:touch}.CodeMirror-foldmarker{padding:5px}@media screen and (max-width: 400px){.CodeMirror-sizer{margin-left:0 !important}.CodeMirror-gutters{display:none}.CodeMirror-gutter-wrapper{display:none}}.CodeMirror-linenumber{cursor:pointer}.CodeMirror-dialog{position:fixed;left:0;right:0;background:#525659;z-index:15;padding:5px .8em;overflow:hidden;color:#e2e2e2;box-shadow:2px 2px 2px rgba(0,0,0,.5)}.CodeMirror-dialog-top{border-bottom:1px solid #eee;bottom:0}.CodeMirror-dialog-bottom{border-top:1px solid #eee;bottom:0}.CodeMirror-dialog input{border:none;outline:none;background:rgba(0,0,0,0);width:20em;color:#fff}.CodeMirror-dialog button{font-size:70%}.CodeMirror{font-size:16px;font-family:"Source Code Pro",monospace}.cm-s-default .cm-header{font-size:18px}.cm-s-default .cm-header.cm-level1{font-size:19px}@media only screen and (max-width: 600px){.CodeMirror{font-size:14px}.cm-s-default .cm-header{font-size:15px}.cm-s-default .cm-header.cm-level1{font-size:16px}}.CodeMirror .CodeMirror-code{line-height:1.3em}.CodeMirror .CodeMirror-code>div{clear:both}.CodeMirror[mode=orgmode] .CodeMirror-code{line-height:1.5em}.CodeMirror .CodeMirror-line{padding-left:10%;padding-right:0;max-width:950px}@media screen and (max-width: 1150px){.CodeMirror .CodeMirror-line{padding-left:8%;padding-right:0}}@media screen and (max-width: 900px){.CodeMirror .CodeMirror-line{padding-left:5%;padding-right:0}}@media screen and (max-width: 800px){.CodeMirror .CodeMirror-line{padding-left:2%;padding-right:0}}.CodeMirror .CodeMirror-linenumber{opacity:.25;color:var(--color)}.CodeMirror .CodeMirror-gutters{box-shadow:none;background-color:inherit;border-right:none}.CodeMirror-linewidget img{cursor:pointer;margin:10px;height:300px;max-width:80%;text-align:center;box-shadow:1px 1px 5px rgba(0,0,0,.5);background:var(--dark)}.cm-s-default .cm-header{color:#3e7aa6;line-height:1em;font-weight:600}.cm-header.cm-level1{color:#376e95}.cm-s-default .cm-keyword{color:var(--emphasis-secondary)}.cm-s-default .cm-header.cm-org-level-star{color:#6f6f6f;vertical-align:baseline;display:inline-block;padding-left:5px;margin-left:-5px;cursor:pointer}.cm-s-default .cm-header.cm-org-todo{color:#ff8355;font-weight:normal;cursor:pointer}.cm-s-default .cm-header.cm-org-done{color:#3bb27c;font-weight:normal;cursor:pointer}.cm-s-default .cm-header.cm-org-priority{cursor:pointer;font-weight:normal}.cm-s-default .cm-org-toggle{cursor:pointer;background:var(--light);color:var(--super-light);border-radius:3px;font-weight:bold;padding-bottom:2px;vertical-align:text-bottom;opacity:.7}.cm-s-default .cm-void{display:inline-block;max-width:10px;overflow:hidden;white-space:nowrap}.cm-s-default .cm-header.cm-comment{font-weight:normal;font-size:.9em !important;float:right;display:inline-block;color:var(--emphasis);line-height:23px}pre.CodeMirror-line{clear:right}.cm-s-default .cm-link{color:var(--emphasis)}.cm-s-default .cm-strong{color:var(--emphasis)}.cm-s-default .cm-org-url,.cm-s-default .cm-org-image{color:var(--emphasis) !important;border-bottom:1px dashed var(--light);cursor:pointer}.cm-s-default .cm-variable-3{color:#085}.cm-s-default .cm-comment{color:var(--light)}.cm-s-default .cm-string,.cm-s-default .cm-string-2{color:#c41a16}.cm-s-default .cm-def{color:#458}.cm-s-default .cm-quote{color:var(--dark)}.CodeMirror-gutters{box-shadow:0px 0px 2px rgba(0,0,0,.1)}.CodeMirror-foldmarker{padding-left:5px;color:var(--color);text-shadow:1px 1px 10px var(--color)}span.CodeMirror-matchingbracket,span.CodeMirror-matchingtag{background:rgba(0,0,0,.1);color:inherit !important}.CodeMirror-cursor{min-width:1px !important}.dark-mode .CodeMirror{background:#242424}.dark-mode .CodeMirror,.dark-mode .CodeMirror .CodeMirror-linenumber,.dark-mode .CodeMirror .cm-variable-2,.dark-mode .CodeMirror .cm-variable-3,.dark-mode .CodeMirror .cm-number,.dark-mode .CodeMirror .cm-quote{color:#f6f3e8}.dark-mode .CodeMirror .cm-string,.dark-mode .CodeMirror .cm-string-2{color:#95e454}.dark-mode .CodeMirror .cm-atom{color:#e5786d}.dark-mode .CodeMirror .cm-keyword,.dark-mode .CodeMirror .cm-meta,.dark-mode .CodeMirror .cm-header,.dark-mode .CodeMirror .cm-property{color:#8ac6f2}.dark-mode .CodeMirror .cm-def,.dark-mode .CodeMirror .cm-tag,.dark-mode .CodeMirror .cm-attribute,.dark-mode .CodeMirror .cm-builtin,.dark-mode .CodeMirror .cm-qualifier{color:#cae682}.dark-mode .CodeMirror .cm-comment{color:#99968b}.dark-mode .CodeMirror .CodeMirror-cursor{background-color:#99968b}.dark-mode .CodeMirror .CodeMirror-selected{background-color:rgba(0,0,0,.3)}.dark-mode .CodeMirror .cm-error{color:var(--error)}.dark-mode .CodeMirror .cm-org-url,.dark-mode .CodeMirror .cm-link,.dark-mode .CodeMirror .cm-org-image,.dark-mode .CodeMirror .cm-url{color:#ccaa8f !important}',""])},2780:(e,t,n)=>{(e.exports=n(9252)(!1)).push([e.id,".component_ide{display:flex;flex-direction:column;width:100%}.component_ide .editor_container{display:flex;flex-grow:1;min-height:0}.component_ide .component_menubar .component_dropdown{float:right}.component_ide .component_menubar .component_dropdown .dropdown_button{border:none;padding:0;margin:0}.component_ide .component_menubar .component_dropdown.active .dropdown_button{box-shadow:none}.component_ide .component_menubar .component_dropdown .dropdown_container ul li>div{padding:0;width:200px}.component_ide .component_menubar .component_dropdown .dropdown_container ul li>div a{padding:7px 5px 7px 10px;display:inline-block;width:100%;box-sizing:border-box}.editor-appear{opacity:0}.editor-appear.editor-appear-active{transition:opacity .3s ease-out;opacity:1}.fab-appear,.fab-enter{opacity:0}.fab-appear.fab-appear-active,.fab-enter.fab-enter-active{transition:all .4s ease-out;opacity:1}.fab-leave{opacity:1}.fab-leave.fab-leave-active{transition:opacity .2s ease-out;opacity:0}",""])},95185:(e,t,n)=>{(e.exports=n(9252)(!1)).push([e.id,'.component_modal.todo-modal{background:var(--bg-color)}.component_modal.todo-modal>div{width:calc(100% - 20px);max-width:500px;padding:5px;border-bottom-right-radius:15px;box-shadow:1px 2px 10px rgba(0,0,0,.05)}.component_modal.todo-modal .modal-top{margin:-5px -5px 0 -5px;padding:30px 0px 0 30px;background:var(--primary);border-bottom:2px solid var(--emphasis-primary);color:rgba(0,0,0,.5);min-height:65px}.component_modal.todo-modal .modal-top h1{margin:0}.component_modal.todo-modal .modal-top span{float:right;margin-top:-10px}.component_modal.todo-modal .modal-top span .component_icon{margin-top:-10px;padding:10px 15px;height:15px;cursor:pointer}.component_modal.todo-modal .modal-top .search{text-align:right}.component_modal.todo-modal .modal-top .search label{background:#fff;margin-bottom:-2px;border-top-left-radius:7px;border-left:2px solid var(--emphasis-primary);border-top:2px solid var(--emphasis-primary);display:inline-block}.component_modal.todo-modal .modal-top .search label.active input,.component_modal.todo-modal .modal-top .search label:hover input{width:150px;padding:2px 7px;transition:width .2s ease-out}.component_modal.todo-modal .modal-top .search label input{transition:width .1s ease-out;width:0px;background:inherit;border:none;border-top-left-radius:7px;margin:0;font-size:1em;color:var(--emphasis-secondary);line-height:25px}.component_modal.todo-modal .modal-top .search label input::-webkit-input-placeholder{color:var(--emphasis-secondary)}.component_modal.todo-modal .modal-top .search label input:-ms-input-placeholder{color:var(--emphasis-secondary)}.component_modal.todo-modal .modal-top .search label input::-moz-input-placeholder{color:var(--emphasis-secondary)}.component_modal.todo-modal .modal-top .search label .component_icon{height:20px;padding:5px}.component_modal.todo-modal .nothing{color:var(--light);text-align:center;padding:40px 0;font-size:1.3em;text-decoration:line-through}.component_modal.todo-modal .container{margin:10px 5px 10px 0px;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;padding:0 10px 10px 10px}.component_modal.todo-modal .container .sticky_header{z-index:2;border-bottom:2px solid var(--primary)}.component_modal.todo-modal .container .sticky_header h2{text-transform:uppercase;font-size:1.1em;color:var(--primary);margin:10px 0 15px 0;font-weight:normal}.component_modal.todo-modal .container .sticky_header h2 span{background:var(--bg-color);font-size:.6em;color:var(--emphasis-secondary);float:right;line-height:1em;vertical-align:middle;display:inline-block;padding:3px 5px;border-radius:3px}.component_modal.todo-modal .container .list{margin:0px 0 40px 0;z-index:0}.component_modal.todo-modal .all-done p{font-size:1.3em;padding:10px 10px 10px 20px;color:var(--light)}.component_headline .headline-main{display:flex;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);border-top:2px solid var(--super-light);border-bottom:2px solid var(--super-light);margin-bottom:-2px;padding:5px 0;transition:color .1s ease-out,border-color .2s ease-out}.component_headline .headline-main.overdue{color:var(--error)}.component_headline .headline-main.done{color:var(--light);transition:color .35s ease-out}.component_headline .headline-main.done:hover{background:inherit}.component_headline .headline-main.done .title>div{border-color:rgba(0,0,0,0) !important}.component_headline .headline-main .title{flex:1;min-width:0;line-height:32px}.component_headline .headline-main .title .label{margin-right:10px}.component_headline .headline-main .title>div{border-radius:2px;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:border-color .2s ease-out;border-left:5px solid rgba(0,0,0,0);padding-left:5px}.component_headline .headline-main .title>div.A,.component_headline .headline-main .title>div.overdue{border-color:var(--error)}.component_headline .headline-main .title>div.B:not(.overdue){border-color:#ff8355}.component_headline .headline-main .title>div.C:not(.overdue){border-color:var(--bg-color)}.component_headline .headline-main .title .component_icon{height:17px;vertical-align:text-top}.component_headline .headline-main .title .tags{display:inline-block;margin-left:10px;font-size:.9em}.component_headline .headline-main .title .tags .tag{padding:0 5px;margin:0 3px;color:red;background:var(--bg-color);color:var(--light);border-radius:4px}.component_headline .headline-main .title .tags .tag:before{content:"#";color:rgba(0,0,0,.2)}.component_headline .headline-main .component_icon{height:18px}.component_headline .headline-main .title{position:relative}.component_headline .headline-main .title:after{content:" ";display:block;width:100%;border-top:2px solid var(--super-light);position:absolute;left:0;bottom:-7px;transition:bottom .15s ease-out}.component_headline .headline-main.done{transition:border-color .15s ease-out;border-color:rgba(0,0,0,0)}.component_headline .headline-main.done .title:after{bottom:15px;transition:bottom .25s ease-out}.component_headline .headline-properties{display:flex;background:var(--super-light);color:var(--light);font-size:.95em;padding:5px 8px}.component_headline .headline-properties>div{display:flex;width:100%}.component_headline .headline-properties>div label{display:flex;width:100%}.component_headline .headline-properties>div label>div{width:100%}@media screen and (max-width: 440px){.component_headline .headline-properties>div{width:100%}}.component_headline .headline-properties input[type=date]{width:100%;background:inherit;border:none;font-size:inherit;font-family:inherit;color:inherit;margin:0;padding:0;line-height:20px}.component_headline .headline-properties .component_icon{width:20px;height:20px;margin-right:4px}.subtask_container{background:#fafafa;color:var(--light);font-size:.95rem;line-height:1rem;padding:5px 0}.subtask_container .component_subtask{margin:0 5px}.subtask_container .component_subtask label{width:100%;display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.subtask_container .component_subtask label .component_checkbox .indicator{top:4px}',""])}}]);