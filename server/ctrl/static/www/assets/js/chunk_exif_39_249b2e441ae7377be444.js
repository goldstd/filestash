(self.webpackChunkfilestash=self.webpackChunkfilestash||[]).push([[39],{4428:(t,e,a)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LargeExif=e.SmallExif=void 0;var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),r=c(a(67294)),i=c(a(62918)),l=c(a(19081)),o=a(73727),s=a(57995),u=a(4070);function c(t){return t&&t.__esModule?t:{default:t}}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}a(34514);var d=function(t){function e(t){m(this,e);var a=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));if(new.target===e)throw new TypeError("Cannot construct Popup instances directly");return a.state={date:null,location:null,iso:null,aperture:null,shutter:null,model:null,maker:null,all:null},a}return p(e,r.default.Component),n(e,[{key:"formatDate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.state.date?this.state.date.toLocaleDateString(navigator.language,function(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}({day:"numeric",year:"numeric",month:"short"},"day","numeric")):t}},{key:"formatTime",value:function(){return this.state.date?this.state.date.toLocaleTimeString("en-us",{weekday:"short",hour:"2-digit",minute:"2-digit"}):null}},{key:"locationMap",value:function(){return"https://www.google.com/maps/search/?api=1&query="+function(t){if(!t||2!==t.length)return null;var e=t[0][0]+"°"+t[0][1]+"'"+t[0][2]+"''"+t[0][3];return(e+=" ")+t[1][0]+"°"+t[1][1]+"'"+t[1][2]+"''"+t[1][3]}(this.state.location)}},{key:"format",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.state[t]?"focal"===t?this.state.focal+"mm":"shutter"===t?this.state.shutter>60?this.state.shutter+"m":this.state.shutter>1?this.state.shutter+"s":"1/"+parseInt(this.state.shutter.denominator/this.state.shutter.numerator)+"s":"iso"===t?"ISO"+this.state.iso:"aperture"===t?"ƒ"+parseInt(10*this.state.aperture)/10:"dimension"===t?2===this.state.dimension.length&&this.state.dimension[0]&&this.state.dimension[1]?this.state.dimension[0]+"x"+this.state.dimension[1]:"-":this.state[t]:e}},{key:"refresh",value:function(){var t=this,e=document.querySelector("img.photo");e&&i.default.getData(e,(function(){var e=i.default.getAllTags(this);t.setState({date:function(t){return t?new(Function.prototype.bind.apply(Date,[null].concat(function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(t.split(/[ :]/))))):null}(e.DateTime||e.DateTimeDigitized||e.DateTimeOriginal||e.GPSDateStamp),location:e.GPSLatitude&&e.GPSLongitude&&[[e.GPSLatitude[0],e.GPSLatitude[1],e.GPSLatitude[2],e.GPSLatitudeRef],[e.GPSLongitude[0],e.GPSLongitude[1],e.GPSLongitude[2],e.GPSLongitudeRef]]||null,maker:e.Make||null,model:e.Model||null,focal:e.FocalLength||null,aperture:e.FNumber||null,shutter:e.ExposureTime||null,iso:e.ISOSpeedRatings||null,dimension:e.PixelXDimension&&e.PixelYDimension&&[e.PixelXDimension,e.PixelYDimension]||null,all:0===Object.keys(e).length?null:e})}))}},{key:"clear",value:function(){var t=Object.assign({},this.state);Object.keys(t).map((function(e){return t[e]=null})),this.setState(t)}}]),e}(),h=(e.SmallExif=function(t){function e(t){return m(this,e),f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return p(e,d),n(e,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"render",value:function(){var t=function(t){if(!t||2!==t.length)return"-";var e=t[0][0]+"°"+t[0][1]+"'"+t[0][2]+"''"+t[0][3];return(e+=" ")+t[1][0]+"°"+t[1][1]+"'"+t[1][2]+"''"+t[1][3]};return r.default.createElement("div",{className:"component_metadata"},r.default.createElement("div",null,r.default.createElement("span",{className:"label no-select"},(0,u.t)("Date"),": "),r.default.createElement("span",{className:"value"},this.formatDate("-"))),r.default.createElement("div",null,r.default.createElement("span",{className:"label no-select"},(0,u.t)("Location"),": "),r.default.createElement("span",{className:"value small"},r.default.createElement("a",{href:"https://www.google.com/maps/search/?api=1&query="+t(this.state.location)},t(this.state.location)))),r.default.createElement("div",null,r.default.createElement("span",{className:"label no-select"},(0,u.t)("Settings"),": "),r.default.createElement("span",{className:"value"},function(t,e,a){return t&&e&&a?"ƒ/"+parseInt(10*t)/10+" "+function(t){return t>60?(parseInt(t)/60).toString()+"m":t>=1?parseInt(t).toString()+"s":"1/"+parseInt(function(t){for(var e=[1,2,3,4,5,6,8,10,13,15,20,25,30,40,45,50,60,80,90,100,125,160,180,200,250,320,350,400,500,640,750,800,1e3,1250,1500,1600,2e3,2500,3e3,3200,4e3,5e3,6e3,6400,8e3,12e3,16e3,32e3,5e4],a=0,n=e.length;a<n;a++)if(!(e[a]<=t))return e[a]-t<e[a-1]-t?e[a]:e[a-1];return t}(1/t)).toString()+"s"}(e)+" ISO"+a:"-"}(this.state.aperture,this.state.shutter,this.state.iso))),r.default.createElement("div",null,r.default.createElement("span",{className:"label no-select"},(0,u.t)("Camera"),": "),r.default.createElement("span",{className:"value"},function(t,e){return t||e?e?t+" ("+parseInt(e)+"mm)":t:"-"}(this.state.model,this.state.focal))))}}]),e}(),function(t){function e(t){m(this,e);var a=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.state.show_more=!1,a.state._=null,a}return p(e,d),n(e,[{key:"componentDidMount",value:function(){this.refresh_handler(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){this.refresh_handler(t)}},{key:"refresh_handler",value:function(t){!0===t.ready&&!0===t.show&&this.state._!==t.data?(this.setState({_:t.data}),this.refresh()):!1===t.ready&&!0===t.show&&null!==this.state._&&(this.setState({_:null}),this.clear())}},{key:"all_meta",value:function(){var t=this;return this.state.all?r.default.createElement("div",null,function(t){return t.sort((function(t,e){return t.toLowerCase().trim()<e.toLowerCase().trim()?-1:t.toLowerCase().trim()>e.toLowerCase().trim()?1:0}))}(Object.keys(this.state.all)).map((function(e,a){return"undefined"===e||"thumbnail"===e?null:r.default.createElement("div",{key:a,className:"meta_key"},r.default.createElement("div",{className:"title"},function(t){return t.replace(/([A-Z][a-z])/g," $1")}(e),": "),r.default.createElement("div",{className:"value"},function(e){if(!t.state.all||void 0===t.state.all[e])return"-";if("number"==typeof t.state.all[e])return parseInt(100*t.state.all[e])/100;if(void 0!==t.state.all[e].denominator&&void 0!==t.state.all[e].numerator)return 1===t.state.all[e].denominator?t.state.all[e].numerator:t.state.all[e].numerator>t.state.all[e].denominator?parseInt(10*t.state.all[e].numerator/t.state.all[e].denominator)/10:t.state.all[e].numerator+"/"+t.state.all[e].denominator;if("string"==typeof t.state.all[e])return t.state.all[e];if(Array.isArray(t.state.all[e])){var a=t.state.all[e];return a.length>15&&(a=a.slice(0,3)).push("..."),a.toString().split(",").join(", ")}return JSON.stringify(t.state.all[e],null,2)}(e)))}))):null}},{key:"render",value:function(){var t=this,e=function(t){if(!t||4!==t.length)return null;var e=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=t[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!e||a.length!==e);n=!0);}catch(t){r=!0,i=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(t,4),a=e[0],n=e[1],r=e[2],i=e[3],l=a+n/60+r/3600;return"S"==i||"W"==i?-l:l};return r.default.createElement("div",null,r.default.createElement("div",{className:"content_box"},r.default.createElement(s.Icon,{name:"schedule"}),r.default.createElement("div",{className:"headline"},t.formatDate()?r.default.createElement(l.default,{transitionName:"text",transitionLeave:!1,transitionEnter:!0,transitionAppear:!0,transitionEnterTimeout:300,transitionAppearTimeout:300},r.default.createElement("span",{key:t.formatDate()},t.formatDate())):r.default.createElement(l.default,{transitionName:"placeholder",transitionLeave:!1,transitionEnter:!0,transitionAppear:!0,transitionEnterTimeout:500,transitionAppearTimeout:500},r.default.createElement("span",{key:t.formatDate()},"-"))),r.default.createElement("div",{className:"description"},t.formatTime()?r.default.createElement(l.default,{transitionName:"text",transitionLeave:!1,transitionEnter:!0,transitionAppear:!0,transitionEnterTimeout:300,transitionAppearTimeout:300},r.default.createElement("span",{key:t.formatTime()},t.formatTime())):r.default.createElement(l.default,{transitionName:"placeholder",transitionLeave:!1,transitionEnter:!0,transitionAppear:!0,transitionEnterTimeout:500,transitionAppearTimeout:500},r.default.createElement("span",{key:t.formatTime()},"-")))),r.default.createElement("div",{className:"content_box"},r.default.createElement(s.Icon,{name:"camera"}),r.default.createElement("div",{className:"headline"},t.format("model")&&t.format("focal")?r.default.createElement(l.default,{transitionName:"text",transitionLeave:!1,transitionEnter:!0,transitionAppear:!0,transitionEnterTimeout:300,transitionAppearTimeout:300},r.default.createElement("span",{key:t.format("model")},t.format("model")," (",t.format("focal"),")")):r.default.createElement(l.default,{transitionName:"placeholder",transitionLeave:!1,transitionEnter:!0,transitionAppear:!0,transitionEnterTimeout:500,transitionAppearTimeout:500},r.default.createElement("span",{key:t.format("model")+t.format("model")},"-"))),r.default.createElement("div",{className:"description"},t.format("shutter")&&t.format("aperture")&&t.format("focal")?r.default.createElement(l.default,{transitionName:"text",transitionLeave:!1,transitionEnter:!0,transitionAppear:!0,transitionEnterTimeout:300,transitionAppearTimeout:300},r.default.createElement("span",{key:t.format("shutter")},t.format("aperture")," ",t.format("shutter")," ",t.format("iso"))):r.default.createElement(l.default,{transitionName:"placeholder",transitionLeave:!1,transitionEnter:!0,transitionAppear:!0,transitionEnterTimeout:500,transitionAppearTimeout:500},r.default.createElement("span",{key:t.format("shutter")+t.format("aperture")+t.format("focal")},"-")))),r.default.createElement(s.NgIf,{cond:null!==this.state.location},r.default.createElement(l.default,{transitionName:"image",transitionLeave:!1,transitionEnter:!0,transitionAppear:!0,transitionEnterTimeout:300,transitionAppearTimeout:300},r.default.createElement("div",{key:JSON.stringify(this.state.location)},r.default.createElement(s.MapShot,{lat:e(this.state.location&&this.state.location[0]),lng:e(this.state.location&&this.state.location[1])})))),r.default.createElement(s.NgIf,{cond:!!this.state.all,className:"more"},r.default.createElement(l.default,{transitionName:"image",transitionLeave:!1,transitionEnter:!0,transitionAppear:!0,transitionEnterTimeout:300,transitionAppearTimeout:300},r.default.createElement("div",{key:null===this.state.all},r.default.createElement(s.Button,{onClick:function(){return t.setState({show_more:!t.state.show_more})},theme:"primary"},"MORE")))),r.default.createElement(l.default,{transitionName:"image",transitionLeave:!1,transitionEnter:!0,transitionAppear:!0,transitionEnterTimeout:300,transitionAppearTimeout:300},r.default.createElement(s.NgIf,{className:"more_container",key:this.state.show_more,cond:!!this.state.show_more},this.all_meta())))}}]),e}());e.LargeExif=(0,s.EventReceiver)((0,o.withRouter)(h))},34514:(t,e,a)=>{"use strict";var n=a(58898);"string"==typeof n&&(n=[[t.id,n,""]]),a(76723)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(t.exports=n.locals)},58898:(t,e,a)=>{(t.exports=a(9252)(!1)).push([t.id,".component_metadata .label{display:inline-block;width:70px;font-size:.95em;text-align:right;padding-right:10px;color:var(--color);vertical-align:top}.component_metadata .value{display:inline-block;width:calc(100% - 80px);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:top;letter-spacing:-0.5px}.component_metadata .value.small{font-size:.95em;letter-spacing:-1px}.text-appear,.text-enter{opacity:0;display:inline-block;transform:translateX(5px);transition:.3s ease transform,.3s ease opacity}.text-appear.text-appear-active,.text-enter.text-enter-active{opacity:1;transform:translateX(0px)}.placeholder-appear,.placeholder-enter{display:inline-block;opacity:0;transition-delay:.5s;transition:0s ease opacity}.placeholder-appear.placeholder-appear-active,.placeholder-enter.placeholder-enter-active{opacity:0}",""])}}]);